<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Luhn Algorithm</title>
    </head>
    <body>
        <h1 id="header"></h1>
        <label for="luhn-input">Input a 16-digit number.</label>
        <input type="text" name="luhn-input" id="luhn-input" placeholder="1234 5678 1234 5678">
        <button type="submit" name="submit-btn" id="submit-btn">Submit</button>

        <script>
            let lInput = document.getElementById('luhn-input');
            let submitBtn = document.getElementById('submit-btn');
            let header = document.getElementById('header');
            let lNum = lInput.value;
            let lReg = /\W|\s|[A-Z]/gi;

            submitBtn.addEventListener('click', calc);

            function calc(e) {
                lNum = lInput.value;
                header.innerHTML = lNum.replace(lReg, "");
                lNum = lNum.replace(lReg, "");
                lNumArr = [];

                for (let i = 0; i < lNum.length; i++) {
                    lNumArr.push(lNum[i]);
                }

                for (let j = lNumArr.length - 2; j >= 0; j -= 2) {
                    lNumArr[j] *= 2;
                }

                for (let k = 0; k < lNumArr.length; k++) {
                    if (lNumArr[k] > 9) {
                        lNumArr[k] -= 9;
                    }
                }

                let lNumResult = lNumArr.reduce(add);

                function add(total, num) {
                    return Number(total) + Number(num);
                }

                if (lNumResult % 10 === 0) {
                    console.log("This number is valid!")
                    console.log(lNumResult);
                } else {
                    console.log("This number is invalid! The remainder is " + (lNumResult % 10) + ".");
                    console.log(lNumArr);
                }

                if (lNum.length <= 1 || lNum.length > 16) {
                    alert("Invalid length!");
                }
            }
        </script>
    </body>
</html>